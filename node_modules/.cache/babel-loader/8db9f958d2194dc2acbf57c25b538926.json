{"ast":null,"code":"import _toConsumableArray from\"/Users/seth/Desktop/watch-store-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/seth/Desktop/watch-store-react/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/seth/Desktop/watch-store-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/seth/Desktop/watch-store-react/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/seth/Desktop/watch-store-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/seth/Desktop/watch-store-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/seth/Desktop/watch-store-react/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{storeProducts,detailProduct}from'./data';var ProductContext=React.createContext();//Provider\n//Consumer\nvar ProductProvider=/*#__PURE__*/function(_Component){_inherits(ProductProvider,_Component);function ProductProvider(){var _getPrototypeOf2;var _this;_classCallCheck(this,ProductProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ProductProvider)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={products:storeProducts,detailProduct:detailProduct,cart:[],modalOpen:false,modalProduct:detailProduct,cartSubtotal:0,cartTax:0,cartTotal:0};_this.setProducts=function(){var tempProducts=[];storeProducts.forEach(function(item){var singleItem=_objectSpread({},item);tempProducts=[].concat(_toConsumableArray(tempProducts),[singleItem]);});_this.setState(function(){return{products:tempProducts};});};_this.getItemById=function(id){var product=_this.state.products.find(function(item){return item.id===id;});return product;};_this.handleDetail=function(id){var product=_this.getItemById(id);_this.setState(function(){return{detailProduct:product};});};_this.addToCart=function(id){var tempProducts=_toConsumableArray(_this.state.products);var index=tempProducts.indexOf(_this.getItemById(id));var product=tempProducts[index];product.inCart=true;product.count=1;var price=product.price;product.total=price;_this.setState(function(){return{products:tempProducts,cart:[].concat(_toConsumableArray(_this.state.cart),[product])};},function(){_this.addTotals();});};_this.openModal=function(id){var product=_this.getItemById(id);_this.setState(function(){return{modalProduct:product,modalOpen:true};},function(){console.log(_this.state);});};_this.closeModal=function(){_this.setState(function(){return{modalOpen:false};});};_this.increment=function(id){var tempCart=_toConsumableArray(_this.state.cart);var selectedProduct=tempCart.find(function(item){return item.id===id;});var index=tempCart.indexOf(selectedProduct);var product=tempCart[index];product.count+=1;product.total=product.count*product.price;_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},function(){_this.addTotals();});};_this.decrement=function(id){var tempCart=_toConsumableArray(_this.state.cart);var selectedProduct=tempCart.find(function(item){return item.id===id;});var index=tempCart.indexOf(selectedProduct);var product=tempCart[index];product.count-=1;if(product.count===0){_this.removeFromCart(id);}else{product.total=product.count*product.price;_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},function(){_this.addTotals();});}};_this.removeFromCart=function(id){var tempProducts=_toConsumableArray(_this.state.products);var tempCart=_toConsumableArray(_this.state.cart);tempCart=tempCart.filter(function(item){return item.id!==id;});var index=tempProducts.indexOf(_this.getItemById(id));var removedProduct=tempProducts[index];removedProduct.inCart=false;removedProduct.count=0;removedProduct.total=0;_this.setState(function(){return{cart:_toConsumableArray(tempCart),products:_toConsumableArray(tempProducts)};},function(){_this.addTotals();});};_this.clearCart=function(){_this.setState(function(){return{cart:[]};},function(){_this.setProducts();_this.addTotals();});};_this.addTotals=function(){var subTotal=0;_this.state.cart.map(function(item){subTotal+=item.total;});var tempTax=subTotal*0.1025;var tax=parseFloat(tempTax.toFixed(2));var total=subTotal+tax;_this.setState(function(){return{cartSubtotal:subTotal.toFixed(2),cartTax:tax.toFixed(2),cartTotal:total.toFixed(2)};});};return _this;}_createClass(ProductProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.setProducts();}},{key:\"render\",value:function render(){return React.createElement(ProductContext.Provider,{value:_objectSpread({},this.state,{handleDetail:this.handleDetail,addToCart:this.addToCart,openModal:this.openModal,closeModal:this.closeModal,increment:this.increment,decrement:this.decrement,removeFromCart:this.removeFromCart,clearCart:this.clearCart})},this.props.children);}}]);return ProductProvider;}(Component);var ProductConsumer=ProductContext.Consumer;export{ProductProvider,ProductConsumer};","map":{"version":3,"sources":["/Users/seth/Desktop/watch-store-react/src/context.js"],"names":["React","Component","storeProducts","detailProduct","ProductContext","createContext","ProductProvider","state","products","cart","modalOpen","modalProduct","cartSubtotal","cartTax","cartTotal","setProducts","tempProducts","forEach","item","singleItem","setState","getItemById","id","product","find","handleDetail","addToCart","index","indexOf","inCart","count","price","total","addTotals","openModal","console","log","closeModal","increment","tempCart","selectedProduct","decrement","removeFromCart","filter","removedProduct","clearCart","subTotal","map","tempTax","tax","parseFloat","toFixed","props","children","ProductConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {storeProducts, detailProduct} from './data';\n\nconst ProductContext = React.createContext();\n//Provider\n//Consumer\n\n\nclass ProductProvider extends Component {\n    state = {\n        products: storeProducts,\n        detailProduct,\n        cart: [],\n        modalOpen: false,\n        modalProduct: detailProduct,\n        cartSubtotal: 0,\n        cartTax: 0,\n        cartTotal: 0\n    };\n\n    componentDidMount() {\n        this.setProducts();\n    }\n    \n    setProducts = () => {\n        let tempProducts = [];\n        storeProducts.forEach(item => {\n            const singleItem = {...item};\n            tempProducts = [...tempProducts, singleItem];\n        });\n        this.setState(() => {\n            return {products: tempProducts}\n        });\n    };\n\n    getItemById = (id) => {\n        const product = this.state.products.find(item => item.id === id);\n        return product;\n    };\n\n    handleDetail = (id) => {\n        const product = this.getItemById(id);\n        this.setState(() => {\n            return {detailProduct: product};\n        });\n    };\n\n    addToCart = (id) => {\n        let tempProducts = [...this.state.products];\n        const index = tempProducts.indexOf(this.getItemById(id));\n        const product = tempProducts[index];\n        product.inCart = true;\n        product.count = 1;\n        const price = product.price;\n        product.total = price;\n\n        this.setState(\n            () => {\n                return { \n                    products: tempProducts, cart: [...this.state.cart, product] \n                };\n            }, \n            () => {\n                this.addTotals();\n            }\n        );\n    };\n\n    openModal = (id) => {\n        const product = this.getItemById(id);\n        this.setState(\n            () => {\n                return {\n                    modalProduct: product,\n                    modalOpen: true\n                };\n            },\n            () => {\n                console.log(this.state);\n            }\n        );\n    };\n\n    closeModal = () => {\n        this.setState(\n            () => {\n                return {\n                    modalOpen: false\n                }\n            }\n        );\n    };\n\n    increment = (id) => {\n        let tempCart = [...this.state.cart];\n        const selectedProduct = tempCart.find( item => item.id === id);\n        const index = tempCart.indexOf(selectedProduct);\n        const product = tempCart[index];\n        product.count += 1;\n        product.total = product.count * product.price;\n\n        this.setState(() => {\n            return {\n                cart: [...tempCart]\n            }\n        }, () => {\n            this.addTotals();\n        });\n    };\n\n    decrement = (id) => {\n        let tempCart = [...this.state.cart];\n        const selectedProduct = tempCart.find( item => item.id === id);\n        const index = tempCart.indexOf(selectedProduct);\n        const product = tempCart[index];\n        product.count -= 1;\n\n        if (product.count === 0) {\n            this.removeFromCart(id);\n        } else {\n            product.total = product.count * product.price;\n\n            this.setState(() => {\n                return {\n                    cart: [...tempCart]\n                }\n            }, () => {\n                this.addTotals();\n            });\n        }\n    };\n\n    removeFromCart = (id) => {\n        let tempProducts = [...this.state.products];\n        let tempCart = [...this.state.cart];\n\n        tempCart = tempCart.filter( item => item.id !== id);\n\n        const index = tempProducts.indexOf(this.getItemById(id));\n        let removedProduct = tempProducts[index];\n        removedProduct.inCart = false;\n        removedProduct.count = 0;\n        removedProduct.total = 0;\n\n        this.setState(() => {\n            return {\n                cart: [...tempCart],\n                products: [...tempProducts]\n            }\n        }, () => {\n            this.addTotals();\n        });\n    };\n\n    clearCart = () => {\n        this.setState(()=> {\n            return {\n                cart: [],\n            }\n        }, ()=> {\n            this.setProducts();\n            this.addTotals();\n        });\n    };\n\n    addTotals = () => {\n        let subTotal = 0;\n        this.state.cart.map( item => {\n            subTotal += item.total\n        });\n        const tempTax = subTotal * 0.1025;\n        const tax = parseFloat(tempTax.toFixed(2));\n        const total = subTotal + tax;\n        this.setState(() => {\n            return {\n                cartSubtotal: subTotal.toFixed(2),\n                cartTax: tax.toFixed(2),\n                cartTotal: total.toFixed(2)\n            };\n        });\n    }\n\n    render() {\n        return (\n            <ProductContext.Provider value={{\n                ...this.state,\n                handleDetail: this.handleDetail,\n                addToCart: this.addToCart,\n                openModal: this.openModal,\n                closeModal: this.closeModal,\n                increment: this.increment,\n                decrement: this.decrement,\n                removeFromCart: this.removeFromCart,\n                clearCart: this.clearCart\n            }}>\n                {this.props.children}\n            </ProductContext.Provider>\n        )\n    }\n}\n\nconst ProductConsumer = ProductContext.Consumer;\n\nexport{ProductProvider, ProductConsumer};\n"]},"metadata":{},"sourceType":"module"}